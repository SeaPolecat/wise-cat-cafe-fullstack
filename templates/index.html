<!-- inherit all the code from base.html -->
{% extends 'base.html' %}

<!-- add HTML code in the blocks -->
{% block head %}

<!-- each page will now have its own style sheet -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">

<title>Wise Cat Caf√©</title>

{% endblock %}

{% block body %}

<video id="cafe-video" class="cafe-video" src="{{ url_for('static', filename='videos/wise_cat_cafe_anim.mp4') }}"></video>

<form id="summon-form" action="/summon" method="GET">
    <button id="door-button" class="door-button"></button>
</form>

<h2>{{ wisdom }}</h2>

<div id="x-blackbar-div-top"
class="x-blackbar-div top {% if summoned %} active1 {% endif %}"></div>

<div id="x-blackbar-div-bottom"
class="x-blackbar-div bottom {% if summoned %} active1 {% endif %}"></div>

<img id="cat-img" class="cat-img" src="{{ img }}">

<br>

<table>
    <form action="/adopt" method="POST">
        <div
        {% if hide_adopt %} style="display:none" {% endif %}>
            
            <input type="text" name="name" required> <!--temp input validation-->
            <button>adopt!</button>
        </div>
    </form>

    <br>

    <form action="/home" method="GET">
        <div
        {% if hide_adopt %} style="display:none" {% endif %}>

            <button>abandon!</button>
        </div>
    </form>
</table>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        if("{{ summoned }}") {
            document.getElementById("cafe-video").currentTime = 50;

            document.getElementById("cat-img").classList.add("active");

            setTimeout(() => {
                document.getElementById("x-blackbar-div-top").classList.add("active2");
                document.getElementById("x-blackbar-div-bottom").classList.add("active2");
            }, 1000);

            setTimeout(() => {
                console.log("bruh");

            }, 2000);
        }
    })

    document.getElementById("summon-form").addEventListener("submit", () => {
        document.getElementById("cafe-video").play();

        document.getElementById("door-button").style.pointerEvents = "none";

        document.getElementById("x-blackbar-div-top").classList.add("active1");
        document.getElementById("x-blackbar-div-bottom").classList.add("active1");
    })
</script>

{% endblock %}
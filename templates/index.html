<!-- inherit all the code from base.html -->
{% extends 'base.html' %}

<!-- add HTML code in the blocks -->
{% block head %}

<!-- each page will now have its own style sheet -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">

<title>Wise Cat Caf√©</title>

{% endblock %}

{% block body %}

<video id="wise-cat-cafe" class="wise-cat-cafe" src="{{ url_for('static', filename='videos/wise_cat_cafe_anim.mp4') }}"></video>

<form action="/summon" method="GET" onsubmit="open_door(); activate_black_bars()">
    <button id="door-clickbox" class="door-clickbox"></button>
</form>

<h2>{{ wisdom }}</h2>

<img id="cat-img" class="cat-img" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRDCsqRYLAFDdL4Ix_AHai7kNVyoPV9Ssv1xg&s">

<div id="black-bar-top" class="black-bar-top"></div>
<div id="black-bar-bottom" class="black-bar-bottom"></div>

<br>

<table>
    <form action="/adopt" method="POST">
        <div {% if hide_adopt %} style="display:none" {% endif %}>
            
            <input type="text" name="name" required> <!--temp input validation-->
            <button>adopt!</button>
        </div>
    </form>

    <br>

    <form action="/home" method="GET">
        <div {% if hide_adopt %} style="display:none" {% endif %}>

            <button>abandon!</button>
        </div>
    </form>
</table>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        if("{{ summoned }}") {
            var wcc_video = document.getElementById("wise-cat-cafe");
            var catImage = document.getElementById("cat-img");

            wcc_video.currentTime = 50;

            catImage.classList.add("active");

            var blackBarTop = document.getElementById("black-bar-top");

            blackBarTop.style.transition = "none";
            blackBarTop.classList.add("active");

            var blackBarBottom = document.getElementById("black-bar-bottom");

            blackBarBottom.style.transition = "none";
            blackBarBottom.classList.add("active");
        }
    })

    // for every function below, use event listeners instead of extra stuff in the HTML
    // (keeps things clean)

    function open_door() {
        var video = document.getElementById("wise-cat-cafe");
        var door_clickbox = document.getElementById("door-clickbox");

        video.play();
        door_clickbox.style.pointerEvents = "none";
    }

    function activate_black_bars() {
        var black_bar_top = document.getElementById("black-bar-top");
        var black_bar_bottom = document.getElementById("black-bar-bottom");

        black_bar_top.classList.add("active");
        black_bar_bottom.classList.add("active");
    }
</script>

{% endblock %}
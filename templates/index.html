<!-- inherit all the code from base.html -->
{% extends 'base.html' %}

<!-- add HTML code in the blocks -->
{% block head %}

<!-- each page will now have its own style sheet -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">

<title>Wise Cat Caf√©</title>

{% endblock %}

{% block body %}

<video id="wise-cat-cafe" class="wise-cat-cafe" src="{{ url_for('static', filename='videos/wise_cat_cafe_anim.mp4') }}"></video>

<form id="summon-form" action="/summon" method="GET">
    <button id="door-clickbox" class="door-clickbox"></button>
</form>

<h2>{{ wisdom }}</h2>

<img id="cat-img" class="cat-img" src="{{ img }}"">

<div id="black-bar-top" class="black-bar top"></div>
<div id="black-bar-bottom" class="black-bar bottom"></div>

<br>

<table>
    <form action="/adopt" method="POST">
        <div {% if hide_adopt %} style="display:none" {% endif %}>
            
            <input type="text" name="name" required> <!--temp input validation-->
            <button>adopt!</button>
        </div>
    </form>

    <br>

    <form action="/home" method="GET">
        <div {% if hide_adopt %} style="display:none" {% endif %}>

            <button>abandon!</button>
        </div>
    </form>
</table>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        if("{{ summoned }}") {
            blackBarTop = document.getElementById("black-bar-top");
            blackBarBottom = document.getElementById("black-bar-bottom");

            document.getElementById("wise-cat-cafe").currentTime = 50;

            blackBarTop.style.transition = "none";
            blackBarTop.classList.add("active1");

            blackBarBottom.style.transition = "none";
            blackBarBottom.classList.add("active1");

            document.getElementById("cat-img").classList.add("active");

            setTimeout(() => {
                blackBarTop.style.transition = "1s ease-out";
                blackBarTop.classList.add("active2");

                blackBarBottom.style.transition = "1s ease-out";
                blackBarBottom.classList.add("active2");

            }, 1000);

            setTimeout(() => {
                console.log("bruh");

            }, 2000);
        } else {
            // hide stuff
        }
    })

    document.getElementById("summon-form").addEventListener("submit", () => {
        document.getElementById("wise-cat-cafe").play();

        document.getElementById("door-clickbox").style.pointerEvents = "none";

        document.getElementById("black-bar-top").classList.add("active1");
        document.getElementById("black-bar-bottom").classList.add("active1");
    })
</script>

{% endblock %}